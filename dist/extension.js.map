{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/extension/EventEmitter.ts","webpack:///./src/extension/util/bindDecorator.ts","webpack:///./src/extension/enums.ts","webpack:///./src/extension/extension.ts","webpack:///./src/extension/util/debounce.ts","webpack:///./src/extension/util/throttle.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","constants","EventEmitter","this","length","events","on","eventName","fn","_this","push","off","filter","eventFn","trigger","args","_i","arguments","event","forEach","apply","target","propertyKey","descriptor","typeOfFunction","TypeError","configurable","boolTrue","bound","writable","KEYS","INPUT","TOGGLE","SEARCH_DEBOUNCE","SCROLL_THROTTLE","extension_PureSuggest","_super","PureSuggest","el","options","focused","toggle","index","Error","createSource","input","querySelector","toggleEl","suggestSource","initialData","initElements","doDelayedSearch","time","timeout","clearTimeout","setTimeout","debounce","doSearch","handleMenuScroll","lastArgs","locked","wrapper","throttle","addEventListener","handleMouseDown","handleClick","handleKeyDown","handleFocus","handleBlur","__extends","document","createElement","className","innerHTML","appendChild","insertBefore","multi","style","display","focus","which","keyCode","UP","handleUp","DOWN","handleDown","ENTER","handleSelect","ESC","handleEsc","preventDefault","classList","add","addEl","menuEl","scrollTop","remove","menuItems","updateHovered","id","getAttribute","setValue","blur","getInputValue","trim","item","suggestItems","addBubble","title","search","then","items","updateMenu","handleItemClick","findDataItem","indexOf","handleItemMove","currentRequest","hasNextPage","menuScrollHeight","nextPage","addMenu","handleBubbleClose","stopPropagation","removeBubble","handleBubbleClick","check","parentNode","term","createMenu","fragment_1","createDocumentFragment","createMenuItem","notFoundEl","textContent","scrollHeight","concat","fragment_2","menuWrapEl","fragment","menuItemEl","titleEl","subtitleEl","highlight","hideAvatar","image","imageWrapEl_1","imageEl","Image","setAttribute","onload","src","createHighlight","subtitle","String","preEl","createTextNode","hlEl","postEl","bubblesEl","bubbleEl","bubbleTextEl","bubbleCloseEl","map","_a","bubble","removeChild","destroy","removeEventListener","__decorate"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,2CClFA,ICAUC,EDAVC,EAAA,WAOI,SAAAA,IANOC,KAAAC,OAAS,EAOZD,KAAKE,UA0Bb,OAvBIH,EAAAL,UAAAS,GAAA,SAAGC,EAAmBC,GAAtB,IAAAC,EAAAN,KAQI,OAPKA,KAAKE,OAAOE,KACbJ,KAAKE,OAAOE,OAGhBJ,KAAKE,OAAOE,GAAWG,KAAKF,GAC5BL,KAAKC,SAEE,WAAM,OAAAK,EAAKE,IAAIJ,EAAWC,KAGrCN,EAAAL,UAAAc,IAAA,SAAIJ,EAAmBC,GACnBL,KAAKE,OAAOE,GAAaJ,KAAKE,OAAOE,GAAWK,OAAO,SAACC,GAAY,OAAAL,IAAOK,IAC3EV,KAAKC,UAGTF,EAAAL,UAAAiB,QAAA,SAAQP,OAAmB,IAAAQ,KAAAC,EAAA,EAAAA,EAAAC,UAAAb,OAAAY,IAAAD,EAAAC,EAAA,GAAAC,UAAAD,GACvB,IAAIE,EAAQf,KAAKE,OAAOE,GAEpBW,GACAA,EAAMC,QAAQ,SAACX,GAAO,OAAAA,EAAEY,WAAA,EAAIL,MAGxCb,EAlCA,GCKM,SAAAT,EAAmC4B,EAAgBC,EAAqBC,GAC1E,IAAIA,UAAsBA,EAAWrC,QAAUe,EAAUuB,eACrD,MAAM,IAAIC,UAAU,8CAA8CH,EAAW,sBAGjF,OACII,aAAczB,EAAU0B,SACxB7C,IAAA,WACI,IAAM8C,EAAWL,EAAWrC,MAAOO,KAAKU,MAQxC,OANAxB,OAAOC,eAAeuB,KAAMmB,GACxBpC,MAAO0C,EACPF,aAAczB,EAAU0B,SACxBE,SAAU5B,EAAU0B,WAGjBC,KArBnB,SAAU3B,GACOA,EAAAuB,eAA6B,WAC7BvB,EAAA0B,UAAoB,EAFrC,CAAU1B,WA0BV,IC1BY6B,GAAZ,SAAYA,GACRA,IAAA,YACAA,IAAA,gBACAA,IAAA,kBACAA,IAAA,cAJJ,CAAYA,krBCqBNC,EAAQ,iBACRC,EAAS,kBAeTC,EAAkB,IAClBC,EAAkB,IAGxBC,EAAA,SAAAC,GAoBI,SAAAC,EAAYC,EAAoBC,GAAhC,IAAA9B,EACI2B,EAAAhE,KAAA+B,OAAOA,KAEP,GAnBMM,EAAA+B,SAAmB,EACnB/B,EAAAgC,QAAkB,EASlBhC,EAAAiC,MAAgB,EAEhBjC,EAAAvB,UAODoD,EACD,MAAM,IAAIK,MAAM,uBAGpB,IAAKJ,IAAYA,EAAQK,aACrB,MAAM,IAAID,MAAM,mCAIpBlC,EAAK6B,GAAKA,EACV7B,EAAKoC,MAAQpC,EAAK6B,GAAGQ,cAAc,IAAMf,GACzCtB,EAAKsC,SAAWtC,EAAK6B,GAAGQ,cAAc,IAAMd,GAC5CvB,EAAKuC,cAAgBT,EAAQK,aAAaL,EAAQU,aAClDxC,EAAK8B,QAAUA,EAEf9B,EAAKyC,eAGLzC,EAAK0C,gBClFP,SAAmB3C,EAAc4C,GACnC,IAAIC,EAEJ,OAAO,eAAU,IAAAtC,KAAAC,EAAA,EAAAA,EAAAC,UAAAb,OAAAY,IAAAD,EAAAC,GAAAC,UAAAD,GACbsC,aAAaD,GAEbA,EAAUE,WAAW,WAAM,OAAA/C,EAAEY,WAAA,EAAIL,IAAOqC,ID4EjBI,CAAS/C,EAAKgD,SAAUxB,GAC/CxB,EAAKiD,iBEnFP,SAAmBlD,EAAc4C,GACnC,IACIO,EADAC,GAAkB,EAGtB,OAAO,SAAAC,QAAiB,IAAA9C,KAAAC,EAAA,EAAAA,EAAAC,UAAAb,OAAAY,IAAAD,EAAAC,GAAAC,UAAAD,GAChB4C,EACAD,EAAW5C,GAKfP,EAAEY,WAAA,EAAIL,GAEN6C,GAAS,EAETL,WAAW,WACHI,IACAE,EAAOzC,WAAA,EAAIuC,GAEXA,EAAW,MAGfC,GAAS,GACVR,KF4DqBU,CAASrD,EAAKiD,iBAAkBxB,GAGxDzB,EAAK6B,GAAGyB,iBAAiB,YAAatD,EAAKuD,iBAC3CvD,EAAK6B,GAAGyB,iBAAiB,QAAStD,EAAKwD,aACvCxD,EAAKoC,MAAMkB,iBAAiB,UAAWtD,EAAKyD,eAC5CzD,EAAKoC,MAAMkB,iBAAiB,QAAStD,EAAK0C,iBAC1C1C,EAAKoC,MAAMkB,iBAAiB,QAAStD,EAAK0D,aAC1C1D,EAAKoC,MAAMkB,iBAAiB,OAAQtD,EAAK2D,cA+jBjD,OAjnBiCC,EAAAhC,EAAAD,GAwD7BC,EAAAxC,UAAAqD,aAAA,WAES/C,KAAK0C,QACN1C,KAAK0C,MAAQyB,SAASC,cAAc,SAEpCpE,KAAK0C,MAAM2B,UAAYzC,EAGvB5B,KAAKmC,GAAGmC,UAAY,GACpBtE,KAAKmC,GAAGoC,YAAYvE,KAAK0C,QAIxB1C,KAAK4C,WACN5C,KAAK4C,SAAWuB,SAASC,cAAc,OAEvCpE,KAAK4C,SAASyB,UAAYxC,EAE1B7B,KAAKmC,GAAGqC,aAAaxE,KAAK4C,SAAU5C,KAAK0C,SAQjDR,EAAAxC,UAAAmE,gBAAA,WACQ7D,KAAKqC,UACLrC,KAAKsC,QAAS,IAQtBJ,EAAAxC,UAAAoE,YAAA,SAAY/C,GAEJA,EAAMG,SAAWlB,KAAK4C,UAAY5C,KAAKsC,OACvCtC,KAAKsC,QAAS,GAKdtC,KAAKoC,QAAQqC,QACbzE,KAAK0C,MAAMgC,MAAMC,QAAU,IAG/B3E,KAAK0C,MAAMkC,UAOf1C,EAAAxC,UAAAqE,cAAA,SAAchD,GACV,IAAI1B,EAAM0B,EAAM8D,OAAS9D,EAAM+D,QAE/B,GAAIzF,IAAQsC,EAAKoD,GACb/E,KAAKgF,gBACF,GAAI3F,IAAQsC,EAAKsD,KACpBjF,KAAKkF,kBACF,GAAI7F,IAAQsC,EAAKwD,MACpBnF,KAAKoF,mBACF,IAAI/F,IAAQsC,EAAK0D,IAGpB,OAFArF,KAAKsF,YAKTvE,EAAMwE,kBAOVrD,EAAAxC,UAAAsE,YAAA,WACIhE,KAAKqC,SAAU,EAEfrC,KAAKmC,GAAGqD,UAAUC,IA9JV,mBAgKJzF,KAAKoC,QAAQqC,OAASzE,KAAK0F,QAC3B1F,KAAK0F,MAAMhB,MAAMC,QAAU,QAG/B3E,KAAKsD,WAELtD,KAAKW,QAAQ,UAOjBuB,EAAAxC,UAAAuE,WAAA,WACIjE,KAAKqC,SAAU,EAGXrC,KAAK2F,SACL3F,KAAK2F,OAAOC,UAAY,EACxB5F,KAAK2F,OAAOjB,MAAMC,QAAU,QAGhC3E,KAAKmC,GAAGqD,UAAUK,OAtLV,mBAyLJ7F,KAAKoC,QAAQqC,QAAUzE,KAAK0C,MAAM3D,QAC9BiB,KAAKjB,MAAMkB,OACXD,KAAK0C,MAAMgC,MAAMC,QAAU,OAE3B3E,KAAK0C,MAAMgC,MAAMC,QAAU,GAG3B3E,KAAK0F,QACL1F,KAAK0F,MAAMhB,MAAMC,QAAU,KAInC3E,KAAKW,QAAQ,SAMjBuB,EAAAxC,UAAAsF,SAAA,YACShF,KAAK8F,WAAa9F,KAAKuC,OAAS,IAAMvC,KAAKqC,SAIhDrC,KAAK+F,cAAc/F,KAAKuC,MAAQ,IAMpCL,EAAAxC,UAAAwF,WAAA,YACSlF,KAAK8F,WAAa9F,KAAKuC,OAASvC,KAAK8F,UAAU7F,OAAS,IAAMD,KAAKqC,SAIxErC,KAAK+F,cAAc/F,KAAKuC,MAAQ,IAMpCL,EAAAxC,UAAA0F,aAAA,WACI,GAAKpF,KAAK8F,WAAc9F,KAAKqC,QAA7B,CAIA,IAAI2D,EAAKhG,KAAK8F,UAAU9F,KAAKuC,OAAO0D,aAAa,WAEjDjG,KAAKkG,SAASF,GAEdhG,KAAK0C,MAAMyD,SAMfjE,EAAAxC,UAAA4F,UAAA,WACItF,KAAK0C,MAAMyD,QAMfjE,EAAAxC,UAAA0G,cAAA,WACI,OAAOpG,KAAK0C,MAAM3D,MAAMsH,QAM5BnE,EAAAxC,UAAAwG,SAAA,SAASF,GACL,IAAIM,EAAOtG,KAAKuG,aAAavG,KAAKuC,OAElCvC,KAAKuC,MAAQ,EAETvC,KAAKoC,QAAQqC,OACbzE,KAAK0C,MAAM3D,MAAQ,GAEnBiB,KAAKjB,MAAMwB,KAAK+F,GAEhBtG,KAAKwG,UAAUF,KAEftG,KAAK0C,MAAM3D,MAAQuH,EAAKG,MAExBzG,KAAKjB,OAASuH,GAEdtG,KAAKW,QAAQ,SAAUqF,KAQ/B9D,EAAAxC,UAAA4D,SAAA,WADA,IAAAhD,EAAAN,KAEIA,KAAK6C,cACA6D,OAAO1G,KAAKoG,gBAAiBpG,KAAKoC,QAAQqC,MAAQzE,KAAKjB,UACvD4H,KAAK,SAACC,GAAU,OAAAtG,EAAKuG,WAAWD,MAOzC1E,EAAAxC,UAAAoH,gBAAA,SAAgB/F,GACZ,IAAIuF,EAAOtG,KAAK+G,aAAahG,EAAMG,QAEnC,GAAIoF,EAAM,CACN,IAAIN,EAAKM,EAAKL,aAAa,WAE3BjG,KAAK+F,cAAc/F,KAAK8F,UAAUkB,QAAQV,IAE1CtG,KAAKkG,SAASF,KAQtB9D,EAAAxC,UAAAuH,eAAA,SAAelG,GACX,IAAIuF,EAAOtG,KAAK+G,aAAahG,EAAMG,QAE/BoF,GACAtG,KAAK+F,cAAc/F,KAAK8F,UAAUkB,QAAQV,KAQlDpE,EAAAxC,UAAA6D,iBAAA,WADA,IAAAjD,EAAAN,KAEI,IAAIA,KAAKkH,gBAAmBlH,KAAK6C,cAAcsE,cAA/C,CAIK,IAAAvB,EAAA5F,KAAA2F,OAAAC,UAED5F,KAAKoH,iBAAmBxB,EA/SX,MAgTb5F,KAAKkH,eAAiBlH,KAAK6C,cACtBwE,WACAV,KAAK,SAACC,GACHtG,EAAKgH,QAAQV,GAEbtG,EAAK4G,eAAiB,UAStChF,EAAAxC,UAAA6H,kBAAA,SAAkBxG,GACd,IAAIG,EAASH,EAAMG,OAInB,GAFAH,EAAMyG,kBApUO,0BAsUTtG,EAAOmD,UAA4B,CACnC,IAAIiC,EAAOtG,KAAK+G,aAAahG,EAAMG,QAE/BoF,GACAtG,KAAKyH,aAAanB,KAS9BpE,EAAAxC,UAAAgI,kBAAA,SAAkB3G,GACdA,EAAMyG,mBAMVtF,EAAAxC,UAAAqH,aAAA,SAAa7F,GACT,IAAIiB,EAAKjB,EACLyG,EAAQ,WAAM,OAAAxF,GAAMA,EAAG8D,cAAgB9D,EAAG8D,aAAa,YAE3D,GAAI0B,IACA,OAAOxF,EAGX,KAAOA,EAAGyF,YAGN,GAFAzF,EAAKA,EAAGyF,WAEJD,IACA,OAAOxF,GAQnBD,EAAAxC,UAAAqG,cAAA,SAAcxD,GACVvC,KAAK8F,UAAU9F,KAAKuC,OAAOiD,UAAUK,OA5XxB,wBA8Xb7F,KAAKuC,MAAQA,EAEbvC,KAAK8F,UAAU9F,KAAKuC,OAAOiD,UAAUC,IAhYxB,yBAsYjBvD,EAAAxC,UAAAmH,WAAA,SAAWD,GAAX,IAAAtG,EAAAN,KACQ6H,EAAO7H,KAAKoG,gBAOhB,GALApG,KAAK8F,aACL9F,KAAKuG,aAAeK,EAEpB5G,KAAK8H,aAEDlB,EAAM3G,OAAQ,CACd,IAAI8H,EAAW5D,SAAS6D,yBAExBhI,KAAKuC,MAAQ,EAEbqE,EAAM5F,QAAQ,SAACsF,GAAS,OAAAhG,EAAK2H,eAAe3B,EAAMyB,EAAUF,KAE5D7H,KAAK2F,OAAOpB,YAAYwD,GAExB/H,KAAK+F,cAAc/F,KAAKuC,WACrB,CACH,IAAI2F,EAAa/D,SAASC,cAAc,OAExC8D,EAAW7D,UA1ZL,qBA2ZN6D,EAAWC,YAlaA,iBAoaXnI,KAAK2F,OAAOpB,YAAY2D,GAG5BlI,KAAKoH,iBAAmBpH,KAAK2F,OAAOyC,cAMxClG,EAAAxC,UAAA4H,QAAA,SAAQV,GAAR,IAAAtG,EAAAN,KACI,GAAKA,KAAK2F,OAAV,CAIA,IAAIkC,EAAO7H,KAAKoG,gBAIhB,GAFApG,KAAKuG,aAAevG,KAAKuG,aAAa8B,OAAOzB,GAEzCA,EAAM3G,OAAQ,CACd,IAAIqI,EAAWnE,SAAS6D,yBAExBpB,EAAM5F,QAAQ,SAACsF,GAAS,OAAAhG,EAAK2H,eAAe3B,EAAMgC,EAAUT,KAE5D7H,KAAK2F,OAAOpB,YAAY+D,GAG5BtI,KAAKoH,iBAAmBpH,KAAK2F,OAAOyC,eAMxClG,EAAAxC,UAAAoI,WAAA,WACQ9H,KAAK2F,QACL3F,KAAK2F,OAAOrB,UAAY,GACxBtE,KAAK2F,OAAOjB,MAAMC,QAAU,GAC5B3E,KAAK2F,OAAOC,UAAY,IAExB5F,KAAKuI,WAAapE,SAASC,cAAc,OACzCpE,KAAK2F,OAASxB,SAASC,cAAc,OAErCpE,KAAKuI,WAAWlE,UApcV,qBAqcNrE,KAAK2F,OAAOtB,UAtcX,gBAwcDrE,KAAKmC,GAAGoC,YAAYvE,KAAKuI,YACzBvI,KAAKuI,WAAWhE,YAAYvE,KAAK2F,QAEjC3F,KAAK2F,OAAO/B,iBAAiB,YAAa5D,KAAK8G,iBAC/C9G,KAAK2F,OAAO/B,iBAAiB,YAAa5D,KAAKiH,gBAC/CjH,KAAK2F,OAAO/B,iBAAiB,SAAU5D,KAAKuD,oBAOpDrB,EAAAxC,UAAAuI,eAAA,SAAe3B,EAAmBkC,EAA4BX,GAC1D,IAAIY,EAAatE,SAASC,cAAc,OACpCsE,EAAUvE,SAASC,cAAc,OACjCuE,EAAaxE,SAASC,cAAc,OACpCwE,EAAY5I,KAAK6C,cAAc+F,UAAUtC,EAAKG,MAAOoB,GAEzD,IAAK7H,KAAKoC,QAAQyG,YAAcvC,EAAKwC,MAAO,CACxC,IAAIC,EAAc5E,SAASC,cAAc,OACrC4E,EAAU7E,SAASC,cAAc,OACjC0E,EAAQ,IAAIG,MAEhBD,EAAQE,aAAa,MAAO5C,EAAKwC,OACjCE,EAAQE,aAAa,MAAO5C,EAAKG,OAEjCsC,EAAY1E,UA/dL,sBAieP0E,EAAYxE,YAAYyE,GACxBP,EAAWlE,YAAYwE,GAGvBD,EAAMK,OAAS,WAAM,OAAAJ,EAAYvD,UAAUC,IApe7B,+BAqedqD,EAAMM,IAAM9C,EAAKwC,MAGrBL,EAAWpE,UA1eN,eA2eLqE,EAAQrE,UAxeG,sBAyeXsE,EAAWtE,UAxeG,yBA0eVuE,EAAU3I,QAAU,EACpByI,EAAQP,YAAc7B,EAAKG,MAE3BzG,KAAKqJ,gBAAgBX,EAASE,GAGlCD,EAAWR,YAAc7B,EAAKgD,SAE9Bb,EAAWlE,YAAYmE,GACvBD,EAAWlE,YAAYoE,GAEvBF,EAAWS,aAAa,UAAWK,OAAOjD,EAAKN,KAE/CwC,EAASjE,YAAYkE,GAErBzI,KAAK8F,UAAUvF,KAAKkI,IAMxBvG,EAAAxC,UAAA2J,gBAAA,SAAgBX,EAAyBE,GACrC,GAAIA,EAAU,IAAMA,EAAU,GAAGvC,OAAQ,CACrC,IAAImD,EAAQrF,SAASsF,eAAeb,EAAU,IAC1Cc,EAAOvF,SAASC,cAAc,QAOlC,GALAsF,EAAKvB,YAAcS,EAAU,GAE7BF,EAAQnE,YAAYiF,GACpBd,EAAQnE,YAAYmF,GAEhBd,EAAU,GAAI,CACd,IAAIe,EAASxF,SAASsF,eAAeb,EAAU,IAE/CF,EAAQnE,YAAYoF,SAGxBjB,EAAQP,YAAcS,EAAU,IAOxC1G,EAAAxC,UAAA8G,UAAA,SAAUF,GACDtG,KAAK4J,YACN5J,KAAK4J,UAAYzF,SAASC,cAAc,OACxCpE,KAAK0F,MAAQvB,SAASC,cAAc,OAEpCpE,KAAK4J,UAAUvF,UA1hBX,mBA2hBJrE,KAAK0F,MAAMrB,UA1hBH,eA4hBRrE,KAAK0F,MAAMyC,YA3iBX,MA6iBAnI,KAAKmC,GAAGqC,aAAaxE,KAAK4J,UAAW5J,KAAK0C,OAC1C1C,KAAKmC,GAAGqC,aAAaxE,KAAK0F,MAAO1F,KAAK0C,OAEtC1C,KAAK4J,UAAUhG,iBAAiB,YAAa5D,KAAKuH,mBAClDvH,KAAK4J,UAAUhG,iBAAiB,QAAS5D,KAAK0H,oBAGlD,IAAImC,EAAW1F,SAASC,cAAc,OAClC0F,EAAe3F,SAASC,cAAc,OACtC2F,EAAgB5F,SAASC,cAAc,OAE3CyF,EAASxF,UAxiBF,iBAyiBPyF,EAAazF,UAxiBD,uBAyiBZ0F,EAAc1F,UAxiBD,wBA0iBbwF,EAASX,aAAa,UAAW5C,EAAKN,IAEtC8D,EAAa3B,YAAc7B,EAAKG,MAEhCoD,EAAStF,YAAYuF,GACrBD,EAAStF,YAAYwF,GACrB/J,KAAK4J,UAAUrF,YAAYsF,GAE3B7J,KAAKmC,GAAGqD,UAAUC,IAlkBX,kBAokBPzF,KAAKW,QAAQ,SAAUX,KAAKjB,MAAMiL,IAAI,SAACC,GAAS,OAARA,EAAAjE,OAM5C9D,EAAAxC,UAAA+H,aAAA,SAAayC,GACT,IAAIlE,EAAKkE,EAAOjE,aAAa,WAEzBD,IACAhG,KAAK4J,UAAUO,YAAYD,GAE3BlK,KAAKjB,MAAQiB,KAAKjB,MAAM0B,OAAO,SAAC6F,GAAS,OAAAA,EAAKN,KAAOA,IAEhDhG,KAAKjB,MAAMkB,SACZD,KAAKmC,GAAGqD,UAAUK,OAnlBnB,kBAqlBC7F,KAAK0C,MAAMgC,MAAMC,QAAU,IAG/B3E,KAAKW,QAAQ,SAAUX,KAAKjB,MAAMiL,IAAI,SAACC,GAAS,OAARA,EAAAjE,QAOhD9D,EAAAxC,UAAA0K,QAAA,WAEIpK,KAAK6C,cAAgB,KACrB7C,KAAKoC,QAAU,KAGfpC,KAAKmC,GAAGkI,oBAAoB,YAAarK,KAAK6D,iBAC9C7D,KAAKmC,GAAGkI,oBAAoB,QAASrK,KAAK8D,aAC1C9D,KAAK0C,MAAM2H,oBAAoB,UAAWrK,KAAK+D,eAC/C/D,KAAK0C,MAAM2H,oBAAoB,QAASrK,KAAKgD,iBAC7ChD,KAAK0C,MAAM2H,oBAAoB,QAASrK,KAAKgE,aAC7ChE,KAAK0C,MAAM2H,oBAAoB,OAAQrK,KAAKiE,YAExCjE,KAAK2F,SACL3F,KAAK2F,OAAO0E,oBAAoB,YAAarK,KAAK8G,iBAClD9G,KAAK2F,OAAO0E,oBAAoB,YAAarK,KAAKiH,gBAClDjH,KAAK2F,OAAO0E,oBAAoB,SAAUrK,KAAKuD,mBAG/CvD,KAAK4J,YACL5J,KAAK4J,UAAUS,oBAAoB,YAAarK,KAAKuH,mBACrDvH,KAAK4J,UAAUS,oBAAoB,QAASrK,KAAK0H,mBAEjD1H,KAAKmC,GAAGgI,YAAYnK,KAAK4J,WACzB5J,KAAKmC,GAAGgI,YAAYnK,KAAK0F,QAGzB1F,KAAKuI,YACLvI,KAAKmC,GAAGgI,YAAYnK,KAAKuI,YAI7BvI,KAAKmC,GAAK,KACVnC,KAAK0C,MAAQ,KACb1C,KAAK4C,SAAW,KAGhB5C,KAAKE,WA7hBToK,GADChL,uCAWDgL,GADChL,mCAoBDgL,GADChL,qCAuBDgL,GADChL,mCAmBDgL,GADChL,kCA0GDgL,GADChL,gCAWDgL,GADChL,uCAiBDgL,GADChL,sCAaDgL,GADChL,wCAuBDgL,GADChL,yCAmBDgL,GADChL,yCAoSL4C,EAjnBA,CAAiCnC","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","export class EventEmitter {\n    public length = 0;\n\n    protected events: {\n        [propName: string]: Function[];\n    };\n\n    constructor() {\n        this.events = {};\n    }\n\n    on(eventName: string, fn: Function) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = [];\n        }\n\n        this.events[eventName].push(fn);\n        this.length++;\n\n        return () => this.off(eventName, fn);\n    }\n\n    off(eventName: string, fn: Function) {\n        this.events[eventName] = this.events[eventName].filter((eventFn) => fn !== eventFn);\n        this.length--;\n    }\n\n    trigger(eventName: string, ...args: any[]) {\n        let event = this.events[eventName];\n\n        if (event) {\n            event.forEach((fn) => fn(...args));\n        }\n    }\n}","namespace constants {\n    export const typeOfFunction: 'function' = 'function';\n    export const boolTrue: boolean = true;\n}\n\nexport function bind<T extends Function>(target: object, propertyKey: string, descriptor: TypedPropertyDescriptor<T>): TypedPropertyDescriptor<T> | void {\n    if(!descriptor || (typeof descriptor.value !== constants.typeOfFunction)) {\n        throw new TypeError(`Only methods can be decorated with @bind. <${propertyKey}> is not a method!`);\n    }\n    \n    return {\n        configurable: constants.boolTrue,\n        get(this: T): T {\n            const bound: T = descriptor.value!.bind(this);\n\n            Object.defineProperty(this, propertyKey, {\n                value: bound,\n                configurable: constants.boolTrue,\n                writable: constants.boolTrue\n            });\n\n            return bound;\n        }\n    };\n}\n\nexport default bind;","export enum KEYS {\n    UP = 38,\n    DOWN = 40,\n    ENTER = 13,\n    ESC = 27\n}","import {SuggestItem} from './interfaces';\nimport {SuggestSource} from './SuggestSource';\nimport {EventEmitter} from './EventEmitter';\nimport {debounce} from './util/debounce';\nimport {throttle} from './util/throttle';\nimport {bind} from './util/bindDecorator';\nimport {KEYS} from './enums';\n\nimport './extension.less';\n\nexport interface ExtensionOptions {\n    hideAvatar?: boolean,\n    multi?: boolean,\n    initialData?: any[],\n    createSource: (initialData?: any[]) => SuggestSource\n}\n\nconst USER_NOT_FOUND = 'User not found';\nconst ADD = 'Add';\nconst FOCUSED = 'suggest_focused';\nconst FILLED = 'suggest_filled';\nconst INPUT = 'suggest__input';\nconst TOGGLE = 'suggest__toggle';\nconst ITEM_HOVERED = 'suggest-item_hovered';\nconst NOT_FOUND = 'suggest__not-found';\nconst MENU = 'suggest__menu';\nconst MENU_WRAP = 'suggest__menu-wrap';\nconst ITEM = 'suggest-item';\nconst ITEM_IMAGE = 'suggest-item__image';\nconst ITEM_IMAGE_LOADED = 'suggest-item__image_loaded';\nconst ITEM_TITLE = 'suggest-item__title';\nconst ITEM_SUBTITLE = 'suggest-item__subtitle';\nconst BUBBLES = 'suggest__bubbles';\nconst BUBBLES_ADD = 'suggest__add';\nconst BUBBLE = 'suggest-bubble';\nconst BUBBLE_TEXT = 'suggest-bubble__text';\nconst BUBBLE_CLOSE = 'suggest-bubble__close';\nconst SEARCH_DEBOUNCE = 250;\nconst SCROLL_THROTTLE = 200;\nconst SCROLL_THRESHOLD = 1000;\n\nexport class PureSuggest extends EventEmitter {\n    protected el: HTMLElement;\n    protected input: HTMLInputElement;\n    protected suggestSource: SuggestSource;\n    protected focused: boolean = false;\n    protected toggle: boolean = false;\n    protected toggleEl?: HTMLDivElement;\n    protected menuWrapEl?: HTMLDivElement;\n    protected menuEl?: HTMLDivElement;\n    protected menuScrollHeight?: number;\n    protected menuItems?: HTMLDivElement[];\n    protected suggestItems?: SuggestItem[];\n    protected bubblesEl?: HTMLDivElement;\n    protected addEl?: HTMLDivElement;\n    protected index: number = 0;\n    protected options: ExtensionOptions;\n    protected value: SuggestItem[] = [];\n    protected doDelayedSearch: () => any;\n    protected currentRequest: Promise<any> | void;\n\n    constructor(el: HTMLDivElement, options: ExtensionOptions) {\n        super();\n\n        if (!el) {\n            throw new Error('element is required');\n        }\n\n        if (!options || !options.createSource) {\n            throw new Error('createSource is required');\n        }\n\n        // init\n        this.el = el;\n        this.input = this.el.querySelector('.' + INPUT);\n        this.toggleEl = this.el.querySelector('.' + TOGGLE);\n        this.suggestSource = options.createSource(options.initialData);\n        this.options = options;\n\n        this.initElements();\n\n        // util\n        this.doDelayedSearch = debounce(this.doSearch, SEARCH_DEBOUNCE);\n        this.handleMenuScroll = throttle(this.handleMenuScroll, SCROLL_THROTTLE);\n\n        // listeners\n        this.el.addEventListener('mousedown', this.handleMouseDown);\n        this.el.addEventListener('click', this.handleClick);\n        this.input.addEventListener('keydown', this.handleKeyDown);\n        this.input.addEventListener('input', this.doDelayedSearch);\n        this.input.addEventListener('focus', this.handleFocus);\n        this.input.addEventListener('blur', this.handleBlur);\n    }\n\n    /**\n     * Init some elements if needed\n     */\n    initElements() {\n        // in case we need to create input by extension\n        if (!this.input) {\n            this.input = document.createElement('input');\n\n            this.input.className = INPUT;\n\n            // element can be filled with some additional nodes, clear it\n            this.el.innerHTML = '';\n            this.el.appendChild(this.input);\n        }\n\n        // in case we need to create toggle by extension\n        if (!this.toggleEl) {\n            this.toggleEl = document.createElement('div');\n\n            this.toggleEl.className = TOGGLE;\n\n            this.el.insertBefore(this.toggleEl, this.input);\n        }\n    }\n\n    /**\n     * Handle mousedown for proper toggle behaviour\n     */\n    @bind\n    handleMouseDown() {\n        if (this.focused) {\n            this.toggle = true;\n        }\n    }\n\n    /**\n     * Handle click on element itself to focus back\n     */\n    @bind\n    handleClick(event: Event) {\n        // just let input blur if toggle happened\n        if (event.target === this.toggleEl && this.toggle) {\n            this.toggle = false;\n\n            return;\n        }\n\n        if (this.options.multi) {\n            this.input.style.display = '';\n        }\n\n        this.input.focus();\n    }\n\n    /**\n     * Handle command keys\n     */\n    @bind\n    handleKeyDown(event: KeyboardEvent) {\n        let key = event.which || event.keyCode;\n\n        if (key === KEYS.UP) {\n            this.handleUp();\n        } else if (key === KEYS.DOWN) {\n            this.handleDown();\n        } else if (key === KEYS.ENTER) {\n            this.handleSelect();\n        } else if (key === KEYS.ESC) {\n            this.handleEsc();\n        } else {\n            return;\n        }\n\n        event.preventDefault();\n    }\n\n    /**\n     * Focus state\n     */\n    @bind\n    handleFocus() {\n        this.focused = true;\n\n        this.el.classList.add(FOCUSED);\n\n        if (this.options.multi && this.addEl) {\n            this.addEl.style.display = 'none';\n        }\n\n        this.doSearch();\n\n        this.trigger('focus');\n    }\n\n    /**\n     * Blur state\n     */\n    @bind\n    handleBlur() {\n        this.focused = false;\n\n        // reset menu\n        if (this.menuEl) {\n            this.menuEl.scrollTop = 0;\n            this.menuEl.style.display = 'none';\n        }\n\n        this.el.classList.remove(FOCUSED);\n\n        // toggle input and add element visibilities for multi-select\n        if (this.options.multi && !this.input.value) {\n            if (this.value.length) {\n                this.input.style.display = 'none';\n            } else {\n                this.input.style.display = '';\n            }\n\n            if (this.addEl) {\n                this.addEl.style.display = '';\n            }\n        }\n\n        this.trigger('blur');\n    }\n\n    /**\n     * Handle KEYS.UP key\n     */\n    handleUp() {\n        if (!this.menuItems || this.index <= 0 || !this.focused) {\n            return;\n        }\n\n        this.updateHovered(this.index - 1);\n    }\n\n    /**\n     * Handle KEYS.DOWN key\n     */\n    handleDown() {\n        if (!this.menuItems || this.index >= this.menuItems.length - 1 || !this.focused) {\n            return;\n        }\n\n        this.updateHovered(this.index + 1);\n    }\n\n    /**\n     * Handle KEYS.ENTER key\n     */\n    handleSelect() {\n        if (!this.menuItems || !this.focused) {\n            return;\n        }\n\n        let id = this.menuItems[this.index].getAttribute('data-id');\n\n        this.setValue(id);\n\n        this.input.blur();\n    }\n\n    /**\n     * Handle KEYS.ESCAPE key\n     */\n    handleEsc() {\n        this.input.blur();\n    }\n\n    /**\n     * Return trimmed input value\n     */\n    getInputValue() {\n        return this.input.value.trim();\n    }\n\n    /**\n     * Update input value and ui state\n     */\n    setValue(id: string) {\n        let item = this.suggestItems[this.index];\n\n        this.index = 0;\n\n        if (this.options.multi) {\n            this.input.value = '';\n\n            this.value.push(item);\n\n            this.addBubble(item);\n        } else {\n            this.input.value = item.title;\n\n            this.value = [item];\n\n            this.trigger('change', id);\n        }\n    }\n\n    /**\n     * Search from suggest source\n     */\n    @bind\n    doSearch() {\n        this.suggestSource\n            .search(this.getInputValue(), this.options.multi ? this.value : [])\n            .then((items) => this.updateMenu(items));\n    }\n\n    /**\n     * Handle click on item in menu\n     */\n    @bind\n    handleItemClick(event: Event) {\n        let item = this.findDataItem(event.target as Element) as HTMLDivElement;\n\n        if (item) {\n            let id = item.getAttribute('data-id');\n\n            this.updateHovered(this.menuItems.indexOf(item));\n\n            this.setValue(id);\n        }\n    }\n\n    /**\n     * Handle item mouse move\n     */\n    @bind\n    handleItemMove(event: Event) {\n        let item = this.findDataItem(event.target as Element) as HTMLDivElement;\n\n        if (item) {\n            this.updateHovered(this.menuItems.indexOf(item));\n        }\n    }\n\n    /**\n     * Handle when menu scrolls\n     */\n    @bind\n    handleMenuScroll() {\n        if (this.currentRequest || !this.suggestSource.hasNextPage()) {\n            return;\n        }\n\n        let {scrollTop} = this.menuEl;\n\n        if (this.menuScrollHeight - scrollTop < SCROLL_THRESHOLD) {\n            this.currentRequest = this.suggestSource\n                .nextPage()\n                .then((items) => {\n                    this.addMenu(items);\n\n                    this.currentRequest = null;\n                });\n        }\n    }\n\n    /**\n     * Handle close button click on bubble\n     */\n    @bind\n    handleBubbleClose(event: Event) {\n        let target = event.target as Element;\n\n        event.stopPropagation();\n\n        if (target.className === BUBBLE_CLOSE) {\n            let item = this.findDataItem(event.target as Element) as HTMLDivElement;\n\n            if (item) {\n                this.removeBubble(item);\n            }\n        }\n    }\n\n    /**\n     * Stop events on bubble click\n     */\n    @bind\n    handleBubbleClick(event: Event) {\n        event.stopPropagation();\n    }\n\n    /**\n     * Find parent menu item\n     */\n    findDataItem(target: Element): Element | void {\n        let el = target,\n            check = () => el && el.getAttribute && el.getAttribute('data-id');\n\n        if (check()) {\n            return el;\n        }\n\n        while (el.parentNode) {\n            el = el.parentNode as Element;\n\n            if (check()) {\n                return el;\n            }\n        }\n    }\n\n    /**\n     * Update index and hovered menu item\n     */\n    updateHovered(index: number) {\n        this.menuItems[this.index].classList.remove(ITEM_HOVERED);\n\n        this.index = index;\n\n        this.menuItems[this.index].classList.add(ITEM_HOVERED);\n    }\n\n    /**\n     * Create menu if needed, create items according to suggest data\n     */\n    updateMenu(items: SuggestItem[]) {\n        let term = this.getInputValue();\n\n        this.menuItems = [];\n        this.suggestItems = items;\n\n        this.createMenu();\n\n        if (items.length) {\n            let fragment = document.createDocumentFragment();\n\n            this.index = 0;\n\n            items.forEach((item) => this.createMenuItem(item, fragment, term));\n\n            this.menuEl.appendChild(fragment);\n\n            this.updateHovered(this.index);\n        } else {\n            let notFoundEl = document.createElement('div');\n\n            notFoundEl.className = NOT_FOUND;\n            notFoundEl.textContent = USER_NOT_FOUND;\n\n            this.menuEl.appendChild(notFoundEl);\n        }\n\n        this.menuScrollHeight = this.menuEl.scrollHeight;\n    }\n\n    /**\n     * Add items to existing menu\n     */\n    addMenu(items: SuggestItem[]) {\n        if (!this.menuEl) {\n            return;\n        }\n\n        let term = this.getInputValue();\n\n        this.suggestItems = this.suggestItems.concat(items);\n\n        if (items.length) {\n            let fragment = document.createDocumentFragment();\n\n            items.forEach((item) => this.createMenuItem(item, fragment, term));\n\n            this.menuEl.appendChild(fragment);\n        }\n\n        this.menuScrollHeight = this.menuEl.scrollHeight;\n    }\n\n    /**\n     * Create or update menu element\n     */\n    createMenu() {\n        if (this.menuEl) {\n            this.menuEl.innerHTML = '';\n            this.menuEl.style.display = '';\n            this.menuEl.scrollTop = 0;\n        } else {\n            this.menuWrapEl = document.createElement('div');\n            this.menuEl = document.createElement('div');\n\n            this.menuWrapEl.className = MENU_WRAP;\n            this.menuEl.className = MENU;\n\n            this.el.appendChild(this.menuWrapEl);\n            this.menuWrapEl.appendChild(this.menuEl);\n\n            this.menuEl.addEventListener('mousedown', this.handleItemClick);\n            this.menuEl.addEventListener('mousemove', this.handleItemMove);\n            this.menuEl.addEventListener('scroll', this.handleMenuScroll);\n        }\n    }\n\n    /**\n     * Create one menu item\n     */\n    createMenuItem(item: SuggestItem, fragment: DocumentFragment, term: string) {\n        let menuItemEl = document.createElement('div'),\n            titleEl = document.createElement('div'),\n            subtitleEl = document.createElement('div'),\n            highlight = this.suggestSource.highlight(item.title, term);\n\n        if (!this.options.hideAvatar && item.image) {\n            let imageWrapEl = document.createElement('div'),\n                imageEl = document.createElement('img'),\n                image = new Image();\n\n            imageEl.setAttribute('src', item.image);\n            imageEl.setAttribute('alt', item.title);\n\n            imageWrapEl.className = ITEM_IMAGE;\n\n            imageWrapEl.appendChild(imageEl);\n            menuItemEl.appendChild(imageWrapEl);\n\n            // load actual image\n            image.onload = () => imageWrapEl.classList.add(ITEM_IMAGE_LOADED);\n            image.src = item.image;\n        }\n\n        menuItemEl.className = ITEM;\n        titleEl.className = ITEM_TITLE;\n        subtitleEl.className = ITEM_SUBTITLE;\n\n        if (highlight.length <= 1) {\n            titleEl.textContent = item.title;\n        } else {\n            this.createHighlight(titleEl, highlight);\n        }\n\n        subtitleEl.textContent = item.subtitle;\n\n        menuItemEl.appendChild(titleEl);\n        menuItemEl.appendChild(subtitleEl);\n\n        menuItemEl.setAttribute('data-id', String(item.id));\n\n        fragment.appendChild(menuItemEl);\n\n        this.menuItems.push(menuItemEl);\n    }\n\n    /**\n     * Create highlight for one item\n     */\n    createHighlight(titleEl: HTMLDivElement, highlight: string[]) {\n        if (highlight[1] && highlight[1].trim()) {\n            let preEl = document.createTextNode(highlight[0]),\n                hlEl = document.createElement('span');\n\n            hlEl.textContent = highlight[1];\n\n            titleEl.appendChild(preEl);\n            titleEl.appendChild(hlEl);\n\n            if (highlight[2]) {\n                let postEl = document.createTextNode(highlight[2]);\n\n                titleEl.appendChild(postEl);\n            }\n        } else {\n            titleEl.textContent = highlight[0];\n        }\n    }\n\n    /**\n     * Add bubble for multi-suggest\n     */\n    addBubble(item: SuggestItem) {\n        if (!this.bubblesEl) {\n            this.bubblesEl = document.createElement('div');\n            this.addEl = document.createElement('div');\n\n            this.bubblesEl.className = BUBBLES;\n            this.addEl.className = BUBBLES_ADD;\n\n            this.addEl.textContent = ADD;\n\n            this.el.insertBefore(this.bubblesEl, this.input);\n            this.el.insertBefore(this.addEl, this.input);\n\n            this.bubblesEl.addEventListener('mousedown', this.handleBubbleClose);\n            this.bubblesEl.addEventListener('click', this.handleBubbleClick);\n        }\n\n        let bubbleEl = document.createElement('div'),\n            bubbleTextEl = document.createElement('div'),\n            bubbleCloseEl = document.createElement('div');\n\n        bubbleEl.className = BUBBLE;\n        bubbleTextEl.className = BUBBLE_TEXT;\n        bubbleCloseEl.className = BUBBLE_CLOSE;\n\n        bubbleEl.setAttribute('data-id', item.id);\n\n        bubbleTextEl.textContent = item.title;\n\n        bubbleEl.appendChild(bubbleTextEl);\n        bubbleEl.appendChild(bubbleCloseEl);\n        this.bubblesEl.appendChild(bubbleEl);\n\n        this.el.classList.add(FILLED);\n\n        this.trigger('change', this.value.map(({id}) => id));\n    }\n\n    /**\n     * Remove bubble for multi-suggest\n     */\n    removeBubble(bubble: HTMLDivElement) {\n        let id = bubble.getAttribute('data-id');\n\n        if (id) {\n            this.bubblesEl.removeChild(bubble);\n\n            this.value = this.value.filter((item) => item.id !== id);\n\n            if (!this.value.length) {\n                this.el.classList.remove(FILLED);\n\n                this.input.style.display = '';\n            }\n\n            this.trigger('change', this.value.map(({id}) => id));\n        }\n    }\n\n    /**\n     * Cleanup\n     */\n    destroy() {\n        // clear options\n        this.suggestSource = null;\n        this.options = null;\n\n        // clear listeners and childs\n        this.el.removeEventListener('mousedown', this.handleMouseDown);\n        this.el.removeEventListener('click', this.handleClick);\n        this.input.removeEventListener('keydown', this.handleKeyDown);\n        this.input.removeEventListener('input', this.doDelayedSearch);\n        this.input.removeEventListener('focus', this.handleFocus);\n        this.input.removeEventListener('blur', this.handleBlur);\n\n        if (this.menuEl) {\n            this.menuEl.removeEventListener('mousedown', this.handleItemClick);\n            this.menuEl.removeEventListener('mousemove', this.handleItemMove);\n            this.menuEl.removeEventListener('scroll', this.handleMenuScroll);\n        }\n\n        if (this.bubblesEl) {\n            this.bubblesEl.removeEventListener('mousedown', this.handleBubbleClose);\n            this.bubblesEl.removeEventListener('click', this.handleBubbleClick);\n\n            this.el.removeChild(this.bubblesEl);\n            this.el.removeChild(this.addEl);\n        }\n\n        if (this.menuWrapEl) {\n            this.el.removeChild(this.menuWrapEl);\n        }\n\n        // clear elements linked from outside\n        this.el = null;\n        this.input = null;\n        this.toggleEl = null;\n\n        // clear events\n        this.events = {};\n    }\n}","export function debounce(fn: Function, time?: number) {\n    let timeout: any;\n\n    return function (...args: any[]) {\n        clearTimeout(timeout);\n\n        timeout = setTimeout(() => fn(...args), time);\n    }\n}","export function throttle(fn: Function, time?: number) {\n    let locked: boolean = false,\n        lastArgs: any[];\n\n    return function wrapper(...args: any[]) {\n        if (locked) {\n            lastArgs = args;\n\n            return;\n        }\n\n        fn(...args);\n\n        locked = true;\n\n        setTimeout(() => {\n            if (lastArgs) {\n                wrapper(...lastArgs);\n\n                lastArgs = null;\n            }\n\n            locked = false;\n        }, time);\n    }\n}"],"sourceRoot":""}