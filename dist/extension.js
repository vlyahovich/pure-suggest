!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({6:function(e,t,n){"use strict";n.r(t);var i,s=function(){function e(){this.length=0,this.events={}}return e.prototype.on=function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this.length++,function(){return n.off(e,t)}},e.prototype.off=function(e,t){this.events[e]=this.events[e].filter(function(e){return t!==e}),this.length--},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.events[e];i&&i.forEach(function(e){return e.apply(void 0,t)})},e}();function l(e,t,n){if(!n||typeof n.value!==i.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+t+"> is not a method!");return{configurable:i.boolTrue,get:function(){var e=n.value.bind(this);return Object.defineProperty(this,t,{value:e,configurable:i.boolTrue,writable:i.boolTrue}),e}}}!function(e){e.typeOfFunction="function",e.boolTrue=!0}(i||(i={}));var o;!function(e){e[e.UP=38]="UP",e[e.DOWN=40]="DOWN",e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC"}(o||(o={}));n(79);n.d(t,"PureSuggest",function(){return p});var u=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=function(e,t,n,i){var s,l=arguments.length,o=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(o=(l<3?s(o):l>3?s(t,n,o):s(t,n))||o);return l>3&&o&&Object.defineProperty(t,n,o),o},a="suggest__input",h="suggest__toggle",d=250,c=200,p=function(e){function t(t,n){var i=e.call(this)||this;if(i.focused=!1,i.toggle=!1,i.index=0,i.value=[],!t)throw new Error("element is required");if(!n||!n.createSource)throw new Error("createSource is required");return i.el=t,i.input=i.el.querySelector("."+a),i.toggleEl=i.el.querySelector("."+h),i.suggestSource=n.createSource(n.initialData),i.options=n,i.initElements(),i.doDelayedSearch=function(e,t){var n;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];clearTimeout(n),n=setTimeout(function(){return e.apply(void 0,i)},t)}}(i.doSearch,d),i.handleMenuScroll=function(e,t){var n,i=!1;return function s(){for(var l=[],o=0;o<arguments.length;o++)l[o]=arguments[o];i?n=l:(e.apply(void 0,l),i=!0,setTimeout(function(){i=!1,n&&(s.apply(void 0,n),n=null)},t))}}(i.handleMenuScroll,c),i.el.addEventListener("mousedown",i.handleMouseDown),i.el.addEventListener("click",i.handleClick),i.input.addEventListener("keydown",i.handleKeyDown),i.input.addEventListener("input",i.doDelayedSearch),i.input.addEventListener("focus",i.handleFocus),i.input.addEventListener("blur",i.handleBlur),i}return u(t,e),t.prototype.initElements=function(){this.input||(this.input=document.createElement("input"),this.input.className=a,this.el.innerHTML="",this.el.appendChild(this.input)),this.toggleEl||(this.toggleEl=document.createElement("div"),this.toggleEl.className=h,this.el.insertBefore(this.toggleEl,this.input))},t.prototype.handleMouseDown=function(){this.focused&&(this.toggle=!0)},t.prototype.handleClick=function(e){e.target===this.toggleEl&&this.toggle?this.toggle=!1:(this.options.multi&&(this.input.style.display=""),this.input.focus())},t.prototype.handleKeyDown=function(e){var t=e.which||e.keyCode;if(t===o.UP)this.handleUp();else if(t===o.DOWN)this.handleDown();else if(t===o.ENTER)this.handleSelect();else{if(t!==o.ESC)return;this.handleEsc()}e.preventDefault()},t.prototype.handleFocus=function(){this.focused=!0,this.el.classList.add("suggest_focused"),this.options.multi&&this.addEl&&(this.addEl.style.display="none"),this.doSearch(),this.trigger("focus")},t.prototype.handleBlur=function(){this.focused=!1,this.menuEl&&(this.menuEl.scrollTop=0,this.menuEl.style.display="none"),this.el.classList.remove("suggest_focused"),this.options.multi&&!this.input.value&&(this.value.length?this.input.style.display="none":this.input.style.display="",this.addEl&&(this.addEl.style.display="")),this.trigger("blur")},t.prototype.handleUp=function(){!this.menuItems||this.index<=0||!this.focused||this.updateHovered(this.index-1)},t.prototype.handleDown=function(){!this.menuItems||this.index>=this.menuItems.length-1||!this.focused||this.updateHovered(this.index+1)},t.prototype.handleSelect=function(){if(this.menuItems&&this.focused){var e=this.menuItems[this.index].getAttribute("data-id");this.setValue(e),this.input.blur()}},t.prototype.handleEsc=function(){this.input.blur()},t.prototype.getInputValue=function(){return this.input.value.trim()},t.prototype.setValue=function(e){var t=this.suggestItems[this.index];this.index=0,this.options.multi?(this.input.value="",this.value.push(t),this.addBubble(t)):(this.input.value=t.title,this.value=[t],this.trigger("change",e))},t.prototype.doSearch=function(){var e=this;this.suggestSource.search(this.getInputValue(),this.options.multi?this.value:[]).then(function(t){return e.updateMenu(t)})},t.prototype.handleItemClick=function(e){var t=this.findDataItem(e.target);if(t){var n=t.getAttribute("data-id");this.updateHovered(this.menuItems.indexOf(t)),this.setValue(n)}},t.prototype.handleItemMove=function(e){var t=this.findDataItem(e.target);t&&this.updateHovered(this.menuItems.indexOf(t))},t.prototype.handleMenuScroll=function(){var e=this;if(!this.currentRequest&&this.suggestSource.hasNextPage()){var t=this.menuEl.scrollTop,n=this.input.value;this.menuScrollHeight-t<1e3&&(this.currentRequest=this.suggestSource.nextPage().then(function(t){n===e.input.value&&(e.addMenu(t),e.currentRequest=null)}))}},t.prototype.handleBubbleClose=function(e){var t=e.target;if(e.stopPropagation(),"suggest-bubble__close"===t.className){var n=this.findDataItem(e.target);n&&this.removeBubble(n)}},t.prototype.handleBubbleClick=function(e){e.stopPropagation()},t.prototype.findDataItem=function(e){var t=e,n=function(){return t&&t.getAttribute&&t.getAttribute("data-id")};if(n())return t;for(;t.parentNode;)if(t=t.parentNode,n())return t},t.prototype.updateHovered=function(e){this.menuItems[this.index].classList.remove("suggest-item_hovered"),this.index=e,this.menuItems[this.index].classList.add("suggest-item_hovered")},t.prototype.updateMenu=function(e){var t=this,n=this.getInputValue();if(this.menuItems=[],this.suggestItems=e,this.createMenu(),e.length){var i=document.createDocumentFragment();this.index=0,e.forEach(function(e){return t.createMenuItem(e,i,n)}),this.menuEl.appendChild(i),this.updateHovered(this.index)}else{var s=document.createElement("div");s.className="suggest__not-found",s.textContent="User not found",this.menuEl.appendChild(s)}this.menuScrollHeight=this.menuEl.scrollHeight},t.prototype.addMenu=function(e){var t=this;if(this.menuEl){var n=this.getInputValue();if(this.suggestItems=this.suggestItems.concat(e),e.length){var i=document.createDocumentFragment();e.forEach(function(e){return t.createMenuItem(e,i,n)}),this.menuEl.appendChild(i)}this.menuScrollHeight=this.menuEl.scrollHeight}},t.prototype.createMenu=function(){this.menuEl?(this.menuEl.innerHTML="",this.menuEl.style.display="",this.menuEl.scrollTop=0):(this.menuWrapEl=document.createElement("div"),this.menuEl=document.createElement("div"),this.menuWrapEl.className="suggest__menu-wrap",this.menuEl.className="suggest__menu",this.el.appendChild(this.menuWrapEl),this.menuWrapEl.appendChild(this.menuEl),this.menuEl.addEventListener("mousedown",this.handleItemClick),this.menuEl.addEventListener("mousemove",this.handleItemMove),this.menuEl.addEventListener("scroll",this.handleMenuScroll))},t.prototype.createMenuItem=function(e,t,n){var i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),o=this.suggestSource.highlight(e.title,n);if(!this.options.hideAvatar&&e.image){var u=document.createElement("div"),r=document.createElement("img"),a=new Image;r.setAttribute("src",e.image),r.setAttribute("alt",e.title),u.className="suggest-item__image",u.appendChild(r),i.appendChild(u),a.onload=function(){return u.classList.add("suggest-item__image_loaded")},a.src=e.image}i.className="suggest-item",s.className="suggest-item__title",l.className="suggest-item__subtitle",o.length<=1?s.textContent=e.title:this.createHighlight(s,o),l.textContent=e.subtitle,i.appendChild(s),i.appendChild(l),i.setAttribute("data-id",String(e.id)),t.appendChild(i),this.menuItems.push(i)},t.prototype.createHighlight=function(e,t){if(t[1]&&t[1].trim()){var n=document.createTextNode(t[0]),i=document.createElement("span");if(i.textContent=t[1],e.appendChild(n),e.appendChild(i),t[2]){var s=document.createTextNode(t[2]);e.appendChild(s)}}else e.textContent=t[0]},t.prototype.addBubble=function(e){this.bubblesEl||(this.bubblesEl=document.createElement("div"),this.addEl=document.createElement("div"),this.bubblesEl.className="suggest__bubbles",this.addEl.className="suggest__add",this.addEl.textContent="Add",this.el.insertBefore(this.bubblesEl,this.input),this.el.insertBefore(this.addEl,this.input),this.bubblesEl.addEventListener("mousedown",this.handleBubbleClose),this.bubblesEl.addEventListener("click",this.handleBubbleClick));var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");t.className="suggest-bubble",n.className="suggest-bubble__text",i.className="suggest-bubble__close",t.setAttribute("data-id",e.id),n.textContent=e.title,t.appendChild(n),t.appendChild(i),this.bubblesEl.appendChild(t),this.el.classList.add("suggest_filled"),this.trigger("change",this.value.map(function(e){return e.id}))},t.prototype.removeBubble=function(e){var t=e.getAttribute("data-id");t&&(this.bubblesEl.removeChild(e),this.value=this.value.filter(function(e){return e.id!==t}),this.value.length||(this.el.classList.remove("suggest_filled"),this.input.style.display=""),this.trigger("change",this.value.map(function(e){return e.id})))},t.prototype.destroy=function(){this.suggestSource=null,this.options=null,this.el.removeEventListener("mousedown",this.handleMouseDown),this.el.removeEventListener("click",this.handleClick),this.input.removeEventListener("keydown",this.handleKeyDown),this.input.removeEventListener("input",this.doDelayedSearch),this.input.removeEventListener("focus",this.handleFocus),this.input.removeEventListener("blur",this.handleBlur),this.menuEl&&(this.menuEl.removeEventListener("mousedown",this.handleItemClick),this.menuEl.removeEventListener("mousemove",this.handleItemMove),this.menuEl.removeEventListener("scroll",this.handleMenuScroll)),this.bubblesEl&&(this.bubblesEl.removeEventListener("mousedown",this.handleBubbleClose),this.bubblesEl.removeEventListener("click",this.handleBubbleClick),this.el.removeChild(this.bubblesEl),this.el.removeChild(this.addEl)),this.menuWrapEl&&this.el.removeChild(this.menuWrapEl),this.el=null,this.input=null,this.toggleEl=null,this.events={}},r([l],t.prototype,"handleMouseDown",null),r([l],t.prototype,"handleClick",null),r([l],t.prototype,"handleKeyDown",null),r([l],t.prototype,"handleFocus",null),r([l],t.prototype,"handleBlur",null),r([l],t.prototype,"doSearch",null),r([l],t.prototype,"handleItemClick",null),r([l],t.prototype,"handleItemMove",null),r([l],t.prototype,"handleMenuScroll",null),r([l],t.prototype,"handleBubbleClose",null),r([l],t.prototype,"handleBubbleClick",null),t}(s)},79:function(e,t){}});
//# sourceMappingURL=extension.js.map