{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/extension/EventEmitter.ts","webpack:///./src/extension/util/bindDecorator.ts","webpack:///./src/extension/enums.ts","webpack:///./src/extension/extension.ts","webpack:///./src/extension/util/debounce.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","constants","EventEmitter","this","length","events","on","eventName","fn","_this","push","off","filter","eventFn","trigger","args","_i","arguments","event","forEach","apply","target","propertyKey","descriptor","typeOfFunction","TypeError","configurable","boolTrue","bound","writable","KEYS","INPUT","TOGGLE","SEARCH_DEBOUNCE","extension_PureSuggest","_super","PureSuggest","el","options","focused","toggle","index","Error","createSource","input","querySelector","toggleEl","suggestSource","initialData","initElements","doDelayedSearch","time","timeout","clearTimeout","setTimeout","debounce","doSearch","addEventListener","handleMouseDown","handleClick","handleKeyDown","handleFocus","handleBlur","__extends","document","createElement","className","innerHTML","appendChild","insertBefore","multi","style","display","focus","which","keyCode","UP","handleUp","DOWN","handleDown","ENTER","handleSelect","ESC","handleEsc","preventDefault","classList","add","addEl","remove","menuEl","menuItems","updateHovered","id","getAttribute","setValue","blur","getInputValue","trim","item","suggestItems","addBubble","title","search","then","items","updateMenu","handleItemClick","findDataItem","indexOf","handleItemMove","handleBubbleClose","stopPropagation","removeBubble","handleBubbleClick","check","parentNode","term","createMenu","fragment_1","createDocumentFragment","createMenuItem","notFoundEl","textContent","menuWrapEl","fragment","menuItemEl","titleEl","subtitleEl","highlight","hideAvatar","image","imageWrapEl_1","imageEl","Image","setAttribute","onload","src","createHighlight","subtitle","String","preEl","createTextNode","hlEl","postEl","bubblesEl","bubbleEl","bubbleTextEl","bubbleCloseEl","map","_a","bubble","removeChild","destroy","removeEventListener","__decorate"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","export class EventEmitter {\n    public length = 0;\n\n    protected events: {\n        [propName: string]: Function[];\n    };\n\n    constructor() {\n        this.events = {};\n    }\n\n    on(eventName: string, fn: Function) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = [];\n        }\n\n        this.events[eventName].push(fn);\n        this.length++;\n\n        return () => this.off(eventName, fn);\n    }\n\n    off(eventName: string, fn: Function) {\n        this.events[eventName] = this.events[eventName].filter((eventFn) => fn !== eventFn);\n        this.length--;\n    }\n\n    trigger(eventName: string, ...args: any[]) {\n        let event = this.events[eventName];\n\n        if (event) {\n            event.forEach((fn) => fn(...args));\n        }\n    }\n}","namespace constants {\n    export const typeOfFunction: 'function' = 'function';\n    export const boolTrue: boolean = true;\n}\n\nexport function bind<T extends Function>(target: object, propertyKey: string, descriptor: TypedPropertyDescriptor<T>): TypedPropertyDescriptor<T> | void {\n    if(!descriptor || (typeof descriptor.value !== constants.typeOfFunction)) {\n        throw new TypeError(`Only methods can be decorated with @bind. <${propertyKey}> is not a method!`);\n    }\n    \n    return {\n        configurable: constants.boolTrue,\n        get(this: T): T {\n            const bound: T = descriptor.value!.bind(this);\n\n            Object.defineProperty(this, propertyKey, {\n                value: bound,\n                configurable: constants.boolTrue,\n                writable: constants.boolTrue\n            });\n\n            return bound;\n        }\n    };\n}\n\nexport default bind;","export enum KEYS {\n    UP = 38,\n    DOWN = 40,\n    ENTER = 13,\n    ESC = 27\n}","import {SuggestItem} from './interfaces';\nimport {SuggestSource} from './SuggestSource';\nimport {EventEmitter} from './EventEmitter';\nimport {debounce} from './util/debounce';\nimport {bind} from './util/bindDecorator';\nimport {KEYS} from './enums';\n\nimport './extension.less';\n\nexport interface ExtensionOptions {\n    hideAvatar?: boolean,\n    multi?: boolean,\n    initialData?: any[],\n    createSource: (initialData?: any[]) => SuggestSource\n}\n\nconst USER_NOT_FOUND = 'User not found';\nconst ADD = 'Add';\nconst FOCUSED = 'suggest_focused';\nconst FILLED = 'suggest_filled';\nconst INPUT = 'suggest__input';\nconst TOGGLE = 'suggest__toggle';\nconst ITEM_HOVERED = 'suggest-item_hovered';\nconst NOT_FOUND = 'suggest__not-found';\nconst MENU = 'suggest__menu';\nconst MENU_WRAP = 'suggest__menu-wrap';\nconst ITEM = 'suggest-item';\nconst ITEM_IMAGE = 'suggest-item__image';\nconst ITEM_IMAGE_LOADED = 'suggest-item__image_loaded';\nconst ITEM_TITLE = 'suggest-item__title';\nconst ITEM_SUBTITLE = 'suggest-item__subtitle';\nconst BUBBLES = 'suggest__bubbles';\nconst BUBBLES_ADD = 'suggest__add';\nconst BUBBLE = 'suggest-bubble';\nconst BUBBLE_TEXT = 'suggest-bubble__text';\nconst BUBBLE_CLOSE = 'suggest-bubble__close';\nconst SEARCH_DEBOUNCE = 250;\n\nexport class PureSuggest extends EventEmitter {\n    protected el: HTMLElement;\n    protected input: HTMLInputElement;\n    protected suggestSource: SuggestSource;\n    protected focused: boolean = false;\n    protected toggle: boolean = false;\n    protected toggleEl?: HTMLDivElement;\n    protected menuWrapEl?: HTMLDivElement;\n    protected menuEl?: HTMLDivElement;\n    protected menuItems?: HTMLDivElement[];\n    protected suggestItems?: SuggestItem[];\n    protected bubblesEl?: HTMLDivElement;\n    protected addEl?: HTMLDivElement;\n    protected index: number = 0;\n    protected options: ExtensionOptions;\n    protected value: SuggestItem[] = [];\n    protected doDelayedSearch: () => any;\n\n    constructor(el: HTMLDivElement, options: ExtensionOptions) {\n        super();\n\n        if (!el) {\n            throw new Error('element is required');\n        }\n\n        if (!options || !options.createSource) {\n            throw new Error('createSource is required');\n        }\n\n        // init\n        this.el = el;\n        this.input = this.el.querySelector('.' + INPUT);\n        this.toggleEl = this.el.querySelector('.' + TOGGLE);\n        this.suggestSource = options.createSource(options.initialData);\n        this.options = options;\n\n        this.initElements();\n\n        // util\n        this.doDelayedSearch = debounce(this.doSearch, SEARCH_DEBOUNCE);\n\n        // listeners\n        this.el.addEventListener('mousedown', this.handleMouseDown);\n        this.el.addEventListener('click', this.handleClick);\n        this.input.addEventListener('keydown', this.handleKeyDown);\n        this.input.addEventListener('input', this.doDelayedSearch);\n        this.input.addEventListener('focus', this.handleFocus);\n        this.input.addEventListener('blur', this.handleBlur);\n    }\n\n    /**\n     * Init some elements if needed\n     */\n    initElements() {\n        // in case we need to create input by extension\n        if (!this.input) {\n            this.input = document.createElement('input');\n\n            this.input.className = INPUT;\n\n            // element can be filled with some additional nodes, clear it\n            this.el.innerHTML = '';\n            this.el.appendChild(this.input);\n        }\n\n        // in case we need to create toggle by extension\n        if (!this.toggleEl) {\n            this.toggleEl = document.createElement('div');\n\n            this.toggleEl.className = TOGGLE;\n\n            this.el.insertBefore(this.toggleEl, this.input);\n        }\n    }\n\n    /**\n     * Handle mousedown for proper toggle behaviour\n     */\n    @bind\n    handleMouseDown() {\n        if (this.focused) {\n            this.toggle = true;\n        }\n    }\n\n    /**\n     * Handle click on element itself to focus back\n     */\n    @bind\n    handleClick(event: Event) {\n        // just let input blur if toggle happened\n        if (event.target === this.toggleEl && this.toggle) {\n            this.toggle = false;\n\n            return;\n        }\n\n        if (this.options.multi) {\n            this.input.style.display = '';\n        }\n\n        this.input.focus();\n    }\n\n    /**\n     * Handle command keys\n     */\n    @bind\n    handleKeyDown(event: KeyboardEvent) {\n        let key = event.which || event.keyCode;\n\n        if (key === KEYS.UP) {\n            this.handleUp();\n        } else if (key === KEYS.DOWN) {\n            this.handleDown();\n        } else if (key === KEYS.ENTER) {\n            this.handleSelect();\n        } else if (key === KEYS.ESC) {\n            this.handleEsc();\n        } else {\n            return;\n        }\n\n        event.preventDefault();\n    }\n\n    /**\n     * Focus state\n     */\n    @bind\n    handleFocus() {\n        this.focused = true;\n\n        this.el.classList.add(FOCUSED);\n\n        if (this.options.multi && this.addEl) {\n            this.addEl.style.display = 'none';\n        }\n\n        this.doSearch();\n\n        this.trigger('focus');\n    }\n\n    /**\n     * Blur state\n     */\n    @bind\n    handleBlur() {\n        this.focused = false;\n\n        this.el.classList.remove(FOCUSED);\n\n        // toggle input and add element visibilities for multi-select\n        if (this.options.multi && !this.input.value) {\n            if (this.value.length) {\n                this.input.style.display = 'none';\n            } else {\n                this.input.style.display = '';\n            }\n\n            if (this.addEl) {\n                this.addEl.style.display = '';\n            }\n        }\n\n        if (this.menuEl) {\n            this.menuEl.style.display = 'none';\n        }\n\n        this.trigger('blur');\n    }\n\n    /**\n     * Handle KEYS.UP key\n     */\n    handleUp() {\n        if (!this.menuItems || this.index <= 0 || !this.focused) {\n            return;\n        }\n\n        this.updateHovered(this.index - 1);\n    }\n\n    /**\n     * Handle KEYS.DOWN key\n     */\n    handleDown() {\n        if (!this.menuItems || this.index >= this.menuItems.length - 1 || !this.focused) {\n            return;\n        }\n\n        this.updateHovered(this.index + 1);\n    }\n\n    /**\n     * Handle KEYS.ENTER key\n     */\n    handleSelect() {\n        if (!this.menuItems || !this.focused) {\n            return;\n        }\n\n        let id = this.menuItems[this.index].getAttribute('data-id');\n\n        this.setValue(id);\n\n        this.input.blur();\n    }\n\n    /**\n     * Handle KEYS.ESCAPE key\n     */\n    handleEsc() {\n        this.input.blur();\n    }\n\n    /**\n     * Return trimmed input value\n     */\n    getInputValue() {\n        return this.input.value.trim();\n    }\n\n    /**\n     * Update input value and ui state\n     */\n    setValue(id: string) {\n        let item = this.suggestItems[this.index];\n\n        this.index = 0;\n\n        if (this.options.multi) {\n            this.input.value = '';\n\n            this.value.push(item);\n\n            this.addBubble(item);\n        } else {\n            this.input.value = item.title;\n\n            this.value = [item];\n\n            this.trigger('change', id);\n        }\n    }\n\n    /**\n     * Search from suggest source\n     */\n    @bind\n    doSearch() {\n        this.suggestSource\n            .search(this.getInputValue(), this.options.multi ? this.value : [])\n            .then((items) => this.updateMenu(items));\n    }\n\n    /**\n     * Handle click on item in menu\n     */\n    @bind\n    handleItemClick(event: Event) {\n        let item = this.findDataItem(event.target as Element) as HTMLDivElement;\n\n        if (item) {\n            let id = item.getAttribute('data-id');\n\n            this.updateHovered(this.menuItems.indexOf(item));\n\n            this.setValue(id);\n        }\n    }\n\n    /**\n     * Handle item mouse move\n     */\n    @bind\n    handleItemMove(event: Event) {\n        let item = this.findDataItem(event.target as Element) as HTMLDivElement;\n\n        if (item) {\n            this.updateHovered(this.menuItems.indexOf(item));\n        }\n    }\n\n    /**\n     * Handle close button click on bubble\n     */\n    @bind\n    handleBubbleClose(event: Event) {\n        let target = event.target as Element;\n\n        event.stopPropagation();\n\n        if (target.className === BUBBLE_CLOSE) {\n            let item = this.findDataItem(event.target as Element) as HTMLDivElement;\n\n            if (item) {\n                this.removeBubble(item);\n            }\n        }\n    }\n\n    /**\n     * Stop events on bubble click\n     */\n    @bind\n    handleBubbleClick(event: Event) {\n        event.stopPropagation();\n    }\n\n    /**\n     * Find parent menu item\n     */\n    findDataItem(target: Element): Element | void {\n        let el = target,\n            check = () => el && el.getAttribute && el.getAttribute('data-id');\n\n        if (check()) {\n            return el;\n        }\n\n        while (el.parentNode) {\n            el = el.parentNode as Element;\n\n            if (check()) {\n                return el;\n            }\n        }\n    }\n\n    /**\n     * Update index and hovered menu item\n     */\n    updateHovered(index: number) {\n        this.menuItems[this.index].classList.remove(ITEM_HOVERED);\n\n        this.index = index;\n\n        this.menuItems[this.index].classList.add(ITEM_HOVERED);\n    }\n\n    /**\n     * Create menu if needed, create items according to suggest data\n     */\n    updateMenu(items: SuggestItem[]) {\n        let term = this.getInputValue();\n\n        this.menuItems = [];\n        this.suggestItems = items;\n\n        this.createMenu();\n\n        if (items.length) {\n            let fragment = document.createDocumentFragment();\n\n            this.index = 0;\n\n            items.forEach((item) => this.createMenuItem(item, fragment, term));\n\n            this.menuEl.appendChild(fragment);\n\n            this.updateHovered(this.index);\n        } else {\n            let notFoundEl = document.createElement('div');\n\n            notFoundEl.className = NOT_FOUND;\n            notFoundEl.textContent = USER_NOT_FOUND;\n\n            this.menuEl.appendChild(notFoundEl);\n        }\n    }\n\n    /**\n     * Create or update menu element\n     */\n    createMenu() {\n        if (this.menuEl) {\n            this.menuEl.innerHTML = '';\n            this.menuEl.style.display = '';\n        } else {\n            this.menuWrapEl = document.createElement('div');\n            this.menuEl = document.createElement('div');\n\n            this.menuWrapEl.className = MENU_WRAP;\n            this.menuEl.className = MENU;\n\n            this.el.appendChild(this.menuWrapEl);\n            this.menuWrapEl.appendChild(this.menuEl);\n\n            this.menuEl.addEventListener('mousedown', this.handleItemClick);\n            this.menuEl.addEventListener('mousemove', this.handleItemMove);\n        }\n    }\n\n    /**\n     * Create one menu item\n     */\n    createMenuItem(item: SuggestItem, fragment: DocumentFragment, term: string) {\n        let menuItemEl = document.createElement('div'),\n            titleEl = document.createElement('div'),\n            subtitleEl = document.createElement('div'),\n            highlight = this.suggestSource.highlight(item.title, term);\n\n        if (!this.options.hideAvatar && item.image) {\n            let imageWrapEl = document.createElement('div'),\n                imageEl = document.createElement('img'),\n                image = new Image();\n\n            imageEl.setAttribute('src', item.image);\n            imageEl.setAttribute('alt', item.title);\n\n            imageWrapEl.className = ITEM_IMAGE;\n\n            imageWrapEl.appendChild(imageEl);\n            menuItemEl.appendChild(imageWrapEl);\n\n            // load actual image\n            image.onload = () => imageWrapEl.classList.add(ITEM_IMAGE_LOADED);\n            image.src = item.image;\n        }\n\n        menuItemEl.className = ITEM;\n        titleEl.className = ITEM_TITLE;\n        subtitleEl.className = ITEM_SUBTITLE;\n\n        if (highlight.length <= 1) {\n            titleEl.textContent = item.title;\n        } else {\n            this.createHighlight(titleEl, highlight);\n        }\n\n        subtitleEl.textContent = item.subtitle;\n\n        menuItemEl.appendChild(titleEl);\n        menuItemEl.appendChild(subtitleEl);\n\n        menuItemEl.setAttribute('data-id', String(item.id));\n\n        fragment.appendChild(menuItemEl);\n\n        this.menuItems.push(menuItemEl);\n    }\n\n    /**\n     * Create highlight for one item\n     */\n    createHighlight(titleEl: HTMLDivElement, highlight: string[]) {\n        if (highlight[1] && highlight[1].trim()) {\n            let preEl = document.createTextNode(highlight[0]),\n                hlEl = document.createElement('span');\n\n            hlEl.textContent = highlight[1];\n\n            titleEl.appendChild(preEl);\n            titleEl.appendChild(hlEl);\n\n            if (highlight[2]) {\n                let postEl = document.createTextNode(highlight[2]);\n\n                titleEl.appendChild(postEl);\n            }\n        } else {\n            titleEl.textContent = highlight[0];\n        }\n    }\n\n    /**\n     * Add bubble for multi-suggest\n     */\n    addBubble(item: SuggestItem) {\n        if (!this.bubblesEl) {\n            this.bubblesEl = document.createElement('div');\n            this.addEl = document.createElement('div');\n\n            this.bubblesEl.className = BUBBLES;\n            this.addEl.className = BUBBLES_ADD;\n\n            this.addEl.textContent = ADD;\n\n            this.el.insertBefore(this.bubblesEl, this.input);\n            this.el.insertBefore(this.addEl, this.input);\n\n            this.bubblesEl.addEventListener('mousedown', this.handleBubbleClose);\n            this.bubblesEl.addEventListener('click', this.handleBubbleClick);\n        }\n\n        let bubbleEl = document.createElement('div'),\n            bubbleTextEl = document.createElement('div'),\n            bubbleCloseEl = document.createElement('div');\n\n        bubbleEl.className = BUBBLE;\n        bubbleTextEl.className = BUBBLE_TEXT;\n        bubbleCloseEl.className = BUBBLE_CLOSE;\n\n        bubbleEl.setAttribute('data-id', item.id);\n\n        bubbleTextEl.textContent = item.title;\n\n        bubbleEl.appendChild(bubbleTextEl);\n        bubbleEl.appendChild(bubbleCloseEl);\n        this.bubblesEl.appendChild(bubbleEl);\n\n        this.el.classList.add(FILLED);\n\n        this.trigger('change', this.value.map(({id}) => id));\n    }\n\n    /**\n     * Remove bubble for multi-suggest\n     */\n    removeBubble(bubble: HTMLDivElement) {\n        let id = bubble.getAttribute('data-id');\n\n        if (id) {\n            this.bubblesEl.removeChild(bubble);\n\n            this.value = this.value.filter((item) => item.id !== id);\n\n            if (!this.value.length) {\n                this.el.classList.remove(FILLED);\n\n                this.input.style.display = '';\n            }\n\n            this.trigger('change', this.value.map(({id}) => id));\n        }\n    }\n\n    /**\n     * Cleanup\n     */\n    destroy() {\n        // clear options\n        this.suggestSource = null;\n        this.options = null;\n\n        // clear listeners and childs\n        this.el.removeEventListener('mousedown', this.handleMouseDown);\n        this.el.removeEventListener('click', this.handleClick);\n        this.input.removeEventListener('keydown', this.handleKeyDown);\n        this.input.removeEventListener('input', this.doDelayedSearch);\n        this.input.removeEventListener('focus', this.handleFocus);\n        this.input.removeEventListener('blur', this.handleBlur);\n\n        if (this.menuEl) {\n            this.menuEl.removeEventListener('mousedown', this.handleItemClick);\n            this.menuEl.removeEventListener('mousemove', this.handleItemMove);\n        }\n\n        if (this.bubblesEl) {\n            this.bubblesEl.removeEventListener('mousedown', this.handleBubbleClose);\n            this.bubblesEl.removeEventListener('click', this.handleBubbleClick);\n\n            this.el.removeChild(this.bubblesEl);\n            this.el.removeChild(this.addEl);\n        }\n\n        if (this.menuWrapEl) {\n            this.el.removeChild(this.menuWrapEl);\n        }\n\n        // clear elements linked from outside\n        this.el = null;\n        this.input = null;\n        this.toggleEl = null;\n\n        // clear events\n        this.events = {};\n    }\n}","export function debounce(fn: Function, time?: number) {\n  let timeout: any;\n\n  return function(...args: any[]) {\n    clearTimeout(timeout);\n\n    timeout = setTimeout(() => fn(...args), time);\n  }\n}"],"sourceRoot":""}